# 📘 Claude Code プラグイン要素の一般的な解説

## 📖 概要

本ドキュメントは、2025年10月にパブリックベータとしてリリースされたClaude Codeの公式プラグインシステムについて解説します。プラグインは、スラッシュコマンド、エージェント、MCPサーバー、フックをまとめて単一のコマンドでインストールできるカスタムコレクションです。

## 🔧 プラグインとは

### プラグインの定義

プラグインは、プロジェクトやチーム間で共有できるカスタム機能でClaude Codeを拡張する仕組みです。マーケットプレイスから事前構築されたプラグインをインストールするか、独自のプラグインを作成してワークフローを自動化できます。

### プラグインに含まれる要素

プラグインは以下の要素を組み合わせてパッケージ化できます：

- **スラッシュコマンド（Slash Commands）**: 頻繁に使用する操作のカスタムショートカットを作成
- **サブエージェント（Subagents）**: 特定の開発タスクに特化した目的別エージェントをインストール
- **MCPサーバー（MCP Servers）**: Model Context Protocolを通じてツールやデータソースに接続
- **フック（Hooks）**: Claude Codeのワークフローの重要なポイントで動作をカスタマイズ

## 🎯 プラグインの主な用途

プラグインは、共通のベストプラクティスを中心にClaude Code環境を標準化するのに役立ちます。一般的な用途には以下があります：

### 標準の強制

エンジニアリングリーダーは、コードレビューやテストワークフロー用の特定のフックを確実に実行させることで、チーム全体の一貫性を維持できます。

### ユーザーサポート

オープンソースメンテナーは、開発者がパッケージを正しく使用できるようにスラッシュコマンドを提供できます。

### ワークフローの共有

デバッグセットアップ、デプロイメントパイプライン、テストハーネスなどの生産性向上ワークフローを構築した開発者は、それらを他の人と簡単に共有できます。

### ツールの接続

内部ツールやデータソースをMCPサーバー経由で接続する必要があるチームは、同じセキュリティと設定プロトコルでプラグインを使用してプロセスを高速化できます。

## 📦 プラグインの構造

### プラグインマニフェスト

プラグインマニフェスト（.claude-plugin/plugin.json）はプラグインのメタデータを記述します。

```json
{
  "name": "my-first-plugin",
  "description": "A simple greeting plugin to learn the basics",
  "version": "1.0.0",
  "author": {
    "name": "Your Name"
  }
}
```

### ディレクトリ構成

典型的なプラグインの構造：

- `.claude-plugin/` - プラグインメタデータと設定
- `commands/` - カスタムスラッシュコマンド
- `agents/` - AIエージェントの定義（マークダウンファイル）
- `hooks/` - Git/システムフック
- `mcp-servers/` - MCPサーバー実装

## 💻 プラグインのインストールと管理

### マーケットプレイスの追加

```bash
/plugin marketplace add anthropics/claude-code
```

### プラグインのインストール

```bash
/plugin install feature-dev
```

### プラグインのブラウズ

```bash
/plugin
```

「Browse Plugins」を選択すると、説明、機能、インストールオプション付きの利用可能なオプションが表示されます。

## 👥 チーム向けプラグイン設定

リポジトリレベルでプラグインを設定して、チーム全体で一貫したツールを確保できます。チームメンバーがリポジトリフォルダを信頼すると、Claude Codeは指定されたマーケットプレイスとプラグインを自動的にインストールします。

リポジトリの `.claude/settings.json` にマーケットプレイスとプラグイン設定を追加します。

## 🔍 Agent Skills

Agent Skillsは、会話のコンテキストに基づいてClaudeが自動的に起動する機能で、コマンドは不要です。

### Skillsの特徴

- ユーザーが特定のトピックに言及したときに自動的に起動
- マークダウンファイルで定義されたエージェントペルソナと指示
- スラッシュコマンドは不要

### Skillsの例

```markdown
---
name: database-backup-automator
description: |
  Automatically handles database backup operations when user 
  mentions backup, restore, or data protection needs.
---

## What This Skill Does
Multi-phase database backup workflow with validation...

## When It Activates
- "I need to backup my database"
- "How do I restore from backup?"
- "Set up automated backups"
```

## 🌐 プラグインエコシステム

### 公式マーケットプレイス

Anthropicは公式のマーケットプレイスを提供しており、コミュニティが作成したプラグインを発見できます。

### コミュニティマーケットプレイス

多数のコミュニティマーケットプレイスが存在し、DevOps自動化から完全な開発スタックまで、あらゆるものを提供しています。

### プラグインの種類

AIインストラクションプラグインは、Claudeに詳細なガイダンス、テンプレート、パターンを提供することで機能し（大多数のプラグイン）、MCPサーバープラグインは、Claudeが呼び出せる別のNode.jsプロセスとして実際のTypeScript/JavaScriptコードを実行します。

## 📝 プラグインの作成

### 基本的な手順

1. プラグインディレクトリの作成
2. プラグインマニフェストの作成
3. コマンド、エージェント、またはフックの追加
4. テストマーケットプレイスでのローカルテスト
5. 公開（オプション）

### ベストプラクティス

- 明確で説明的なプラグイン名を使用
- 包括的なドキュメントを提供
- バージョン管理に従う
- コミュニティのフィードバックに対応

## 🚀 始め方

1. Claude Codeをインストール
2. `/plugin` コマンドを使用してプラグインシステムにアクセス
3. マーケットプレイスを追加
4. プラグインをインストール
5. ターミナルまたはVS Codeで使用

詳細については、[公式ドキュメント](https://docs.claude.com/en/docs/claude-code/plugins)を参照してください。
